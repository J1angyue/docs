import{_ as s,c as i,o as a,a2 as e}from"./chunks/framework.L8572a26.js";const g=JSON.parse('{"title":"Vite && Vue","description":"","frontmatter":{},"headers":[],"relativePath":"vite-vue/index.md","filePath":"vite-vue/index.md"}'),n={name:"vite-vue/index.md"},t=e(`<h1 id="vite-vue" tabindex="-1">Vite &amp;&amp; Vue <a class="header-anchor" href="#vite-vue" aria-label="Permalink to &quot;Vite &amp;&amp; Vue&quot;">​</a></h1><h2 id="注入自定义环境变量" tabindex="-1">注入自定义环境变量 <a class="header-anchor" href="#注入自定义环境变量" aria-label="Permalink to &quot;注入自定义环境变量&quot;">​</a></h2><p>通过命令行向 <code>process.env</code> 中增加键值，比如构建时动态设置版本号</p><h3 id="安装插件" tabindex="-1">安装插件 <a class="header-anchor" href="#安装插件" aria-label="Permalink to &quot;安装插件&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i cross-env -D</span></span></code></pre></div><h3 id="设置环境变量" tabindex="-1">设置环境变量 <a class="header-anchor" href="#设置环境变量" aria-label="Permalink to &quot;设置环境变量&quot;">​</a></h3><p>通过 <code>npx</code> 执行 <code>cross-env</code>，并以<code>\${key}=\${value}</code>的形式传参给 <code>cross-env</code>，在某些 <code>js</code> 文件中就能通过 <code>process.env[key]</code> 的方法获取到 <code>value</code></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cross-env _SOME_CUSTOM_ENV_VAR_=some-env-value ANOTHER_VARIABLE=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ANOTHER_VARIABLE_B=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite build</span></span></code></pre></div><h3 id="获取环境变量" tabindex="-1">获取环境变量 <a class="header-anchor" href="#获取环境变量" aria-label="Permalink to &quot;获取环境变量&quot;">​</a></h3><p>在由 <code>node</code> 运行的 <code>js</code> 构建文件中，可以通过 <code>process.env[key]</code> 获取到值，而在应用代码文件中 <code>vite</code> 不支持访问 <code>process.env</code>，但可以通过配置构建项 <code>define</code> 来实现相同的功能：<a href="https://cn.vitejs.dev/config/shared-options.html#define" target="_blank" rel="noreferrer">Vite 设置全局常量 - define</a></p><ol><li>在用于构建 <code>js</code> 的文件中获取、设置 <code>define</code></li></ol><p>比如在 <code>vite.config.js</code> 中：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  define: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    customEnvVariable: process.env._SOME_CUSTOM_ENV_VAR_,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;process.env.ANOTHER_VARIABLE_A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ANOTHER_VARIABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;import.meta.env.ANOTHER_VARIABLE_B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ANOTHER_VARIABLE_B</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // other configs...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><ol start="2"><li>在应用代码中访问 <code>define</code> 的环境变量，变量名是在 <code>define</code> 中配置的键名</li></ol><p>比如在 <code>main.js</code> 或者 <code>xxx.vue</code> 中：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(customEnvVariable);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ANOTHER_VARIABLE_A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ANOTHER_VARIABLE_B</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 打印结果：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;some-env-value&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;2&quot;</span></span></code></pre></div>`,16),l=[t];function p(h,k,o,d,c,r){return a(),i("div",null,l)}const u=s(n,[["render",p]]);export{g as __pageData,u as default};
