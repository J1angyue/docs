import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as c,c as p,b as s,d as n,e as i,a}from"./app-BepkVmch.js";const l={},d=a('<h1 id="vite-vue" tabindex="-1"><a class="header-anchor" href="#vite-vue"><span>Vite &amp;&amp; Vue</span></a></h1><h2 id="注入自定义环境变量" tabindex="-1"><a class="header-anchor" href="#注入自定义环境变量"><span>注入自定义环境变量</span></a></h2><p>通过命令行向 <code>process.env</code> 中增加键值，比如构建时动态设置版本号</p><h3 id="安装插件" tabindex="-1"><a class="header-anchor" href="#安装插件"><span>安装插件</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> i cross-env <span class="token parameter variable">-D</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="设置环境变量" tabindex="-1"><a class="header-anchor" href="#设置环境变量"><span>设置环境变量</span></a></h3><p>通过 <code>npx</code> 执行 <code>cross-env</code>，并以<code>${key}=${value}</code>的形式传参给 <code>cross-env</code>，在某些 <code>js</code> 文件中就能通过 <code>process.env[key]</code> 的方法获取到 <code>value</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx cross-env <span class="token assign-left variable">_SOME_CUSTOM_ENV_VAR_</span><span class="token operator">=</span>some-env-value <span class="token assign-left variable">ANOTHER_VARIABLE</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ANOTHER_VARIABLE_B</span><span class="token operator">=</span><span class="token number">2</span> vite build\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="获取环境变量" tabindex="-1"><a class="header-anchor" href="#获取环境变量"><span>获取环境变量</span></a></h3>',9),r=s("code",null,"node",-1),u=s("code",null,"js",-1),v=s("code",null,"process.env[key]",-1),k=s("code",null,"vite",-1),m=s("code",null,"process.env",-1),h=s("code",null,"define",-1),_={href:"https://cn.vitejs.dev/config/shared-options.html#define",target:"_blank",rel:"noopener noreferrer"},b=a(`<ol><li>在用于构建 <code>js</code> 的文件中获取、设置 <code>define</code></li></ol><p>比如在 <code>vite.config.js</code> 中：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">customEnvVariable</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>_SOME_CUSTOM_ENV_VAR_<span class="token punctuation">,</span>
    <span class="token string-property property">&quot;process.env.ANOTHER_VARIABLE_A&quot;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ANOTHER_VARIABLE</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;import.meta.env.ANOTHER_VARIABLE_B&quot;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ANOTHER_VARIABLE_B</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// other configs...</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>在应用代码中访问 <code>define</code> 的环境变量，变量名是在 <code>define</code> 中配置的键名</li></ol><p>比如在 <code>main.js</code> 或者 <code>xxx.vue</code> 中：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>customEnvVariable<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ANOTHER_VARIABLE_A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ANOTHER_VARIABLE_B</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 打印结果：</span>
<span class="token comment">// &quot;some-env-value&quot;</span>
<span class="token comment">// &quot;1&quot;</span>
<span class="token comment">// &quot;2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function f(g,A){const e=o("ExternalLinkIcon");return c(),p("div",null,[d,s("p",null,[n("在由 "),r,n(" 运行的 "),u,n(" 构建文件中，可以通过 "),v,n(" 获取到值，而在应用代码文件中 "),k,n(" 不支持访问 "),m,n("，但可以通过配置构建项 "),h,n(" 来实现相同的功能："),s("a",_,[n("Vite 设置全局常量 - define"),i(e)])]),b])}const V=t(l,[["render",f],["__file","index.html.vue"]]),R=JSON.parse('{"path":"/vite-vue/","title":"Vite && Vue","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"注入自定义环境变量","slug":"注入自定义环境变量","link":"#注入自定义环境变量","children":[{"level":3,"title":"安装插件","slug":"安装插件","link":"#安装插件","children":[]},{"level":3,"title":"设置环境变量","slug":"设置环境变量","link":"#设置环境变量","children":[]},{"level":3,"title":"获取环境变量","slug":"获取环境变量","link":"#获取环境变量","children":[]}]}],"git":{"createdTime":1707467664000,"updatedTime":1707467664000,"contributors":[{"name":"马振轩","email":"mzx23333@163.com","commits":1}]},"readingTime":{"minutes":0.91,"words":274},"filePathRelative":"vite-vue/README.md","localizedDate":"2024年2月9日"}');export{V as comp,R as data};
