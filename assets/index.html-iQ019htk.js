import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as l,c as r,b as n,d as s,e as a,w as c,a as e}from"./app-uZC-vkso.js";const d="/docs/assets/2023-09-11_143646-gndW3zjk.jpg",u="/docs/assets/2023-09-11_145916-WQyGKxj1.jpg",k="/docs/assets/2023-09-11_150205-FLEsEsZL.jpg",v="/docs/assets/2023-09-11_152652-v7zdp-F6.jpg",m="/docs/assets/2023-09-11_162750-35mwDJ48.jpg",h="/docs/assets/2023-09-11_190923-iG9jThlW.jpg",b="/docs/assets/2023-09-11_191300-d47fSbPA.jpg",_="/docs/assets/2023-09-11_191530-ByD8vc1N.jpg",y="/docs/assets/2023-10-23_090122-ufF6QF-c.jpg",g="/docs/assets/2023-10-23_090319-NPWQTa3w.jpg",f="/docs/assets/2023-10-23_094614-Ebp-pjcr.jpg",E="/docs/assets/zdbæœåŠ¡å™¨-w9k9868R.jpg",S={},x=n("h1",{id:"sentry-ç›‘æ§å¹³å°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#sentry-ç›‘æ§å¹³å°"},[n("span",null,"Sentry ç›‘æ§å¹³å°")])],-1),R=n("p",null,"æ­å»ºè‡ªæ‰˜ç®¡ç§æœï¼Œä¸ä½¿ç”¨ Sentry å¼€æ”¾äºäº’è”ç½‘çš„ SaaS æœåŠ¡",-1),w=n("h2",{id:"ä¸‹è½½-å®‰è£…",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¸‹è½½-å®‰è£…"},[n("span",null,"ä¸‹è½½ & å®‰è£…")])],-1),T={href:"https://develop.sentry.dev/self-hosted/",target:"_blank",rel:"noopener noreferrer"},j=e('<h3 id="_1-å‡†å¤‡æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#_1-å‡†å¤‡æœåŠ¡å™¨"><span>1. å‡†å¤‡æœåŠ¡å™¨</span></a></h3><p>é•œåƒï¼š<code>CentOS-7-x86_64-DVD-2009.iso</code></p><p>ç¡¬ä»¶é…ç½®è¦æ±‚ï¼š</p><ul><li>CPUï¼š<code>4 æ ¸</code> åŠä»¥ä¸Š</li><li>è¿å­˜ï¼š<code>3800 MB</code> åŠä»¥ä¸Š</li><li>ç£ç›˜ï¼š<code>20 GB</code> åŠä»¥ä¸Š</li></ul><p>ä¸æ»¡è¶³ç¡¬ä»¶è¦æ±‚å°†æ— æ³•é€šè¿‡ sentry çš„æ ¡éªŒï¼Œæ— æ³•è¿›è¡Œå®‰è£…</p><h3 id="_2-å®‰è£…-docker-å’Œ-docker-compose" tabindex="-1"><a class="header-anchor" href="#_2-å®‰è£…-docker-å’Œ-docker-compose"><span>2. å®‰è£… docker å’Œ docker-compose</span></a></h3>',6),D={href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"},q=e(`<ol><li><p>ç§»é™¤æ—§ç‰ˆ docker</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\\</span>
               docker-client <span class="token punctuation">\\</span>
               docker-client-latest <span class="token punctuation">\\</span>
               docker-common <span class="token punctuation">\\</span>
               docker-latest <span class="token punctuation">\\</span>
               docker-latest-logrotate <span class="token punctuation">\\</span>
               docker-logrotate <span class="token punctuation">\\</span>
               docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å®‰è£… yum å¹¶è®¾ç½® yum&amp;docker æº</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils
<span class="token function">sudo</span> yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å®‰è£… docker å’Œ docker-compose</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>å¯åŠ¨ docker</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h3 id="_3-ä¸‹è½½-sentry" tabindex="-1"><a class="header-anchor" href="#_3-ä¸‹è½½-sentry"><span>3. ä¸‹è½½ sentry</span></a></h3>`,2),N={href:"https://github.com/getsentry/self-hosted/releases",target:"_blank",rel:"noopener noreferrer"},P={href:"https://github.com/getsentry/self-hosted/releases/tag/23.8.0",target:"_blank",rel:"noopener noreferrer"},A=e(`<p>ä¸‹è½½åå¾—åˆ° <code>self-hosted-23.8.0.tar.gz</code></p><h3 id="_4-å®‰è£…-sentry" tabindex="-1"><a class="header-anchor" href="#_4-å®‰è£…-sentry"><span>4. å®‰è£… sentry</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># å°†å‹ç¼©åŒ…ç§»åŠ¨åˆ° /usr/local åå†æ‰§è¡Œ tar å‘½ä»¤</span>
<span class="token builtin class-name">cd</span> /usr/local
<span class="token comment"># è§£å‹å®Œæˆåå¾—åˆ° self-hosted-23.8.0 ç›®å½•</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> self-hosted-23.8.0.tar.gz
<span class="token comment"># é‡å‘½åç›®å½•ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ä¸è¿›å…¥</span>
<span class="token function">mv</span> self-hosted-23.8.0 setnry
<span class="token builtin class-name">cd</span> setnry
./install.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸æ˜¯éå¾—æ”¾åœ¨ <code>/usr/local</code>ï¼Œéç³»ç»Ÿå…³é”®ä½ç½®éƒ½å¯ä»¥</p><p>è¯¥æ­¥ï¼š<code>â–¶ Fetching and updating Docker images ...</code>ä¼šå¡ä½è¾ƒé•¿æ—¶é—´ï¼Œè§£å†³æ–¹æ³•ï¼š</p>`,5),I=n("li",null,[n("p",null,[s("ç­‰å¾… 20~30 ååˆ†é’Ÿåè‹¥ä»ç„¶ä¸åŠ¨ç›´æ¥æŒ‰ä¸‹"),n("code",null,"Ctrl + C"),s("ç»“æŸè¿›ç¨‹å³å¯ï¼Œç»“æŸåå†æ¬¡æ‰§è¡Œ"),n("code",null,"./install.sh"),s("ï¼Œå¤šç­‰å¾…å‡ æ¬¡ï¼Œå¤šç»“æŸå‡ æ¬¡ï¼Œå®‰è£…å°±èƒ½è¿›è¡Œåˆ°ä¸‹ä¸€æ­¥ï¼›æˆ–è€…å‚è€ƒ 2\\3")])],-1),C=n("li",null,[n("p",null,[s("åŠ é€Ÿ github ("),n("code",null,"23.8.0: Pulling from getsentry/sentry"),s(")ã€é­”æ³•ä¸Šç½‘")])],-1),B=e(`<h3 id="_5-åˆ›å»ºé¦–ä¸ªè´¦å·" tabindex="-1"><a class="header-anchor" href="#_5-åˆ›å»ºé¦–ä¸ªè´¦å·"><span>5. åˆ›å»ºé¦–ä¸ªè´¦å·</span></a></h3><p><code>Would you like to create a user account now? [Y/n]: Y</code></p><p>è¾“å…¥é‚®ç®±ï¼ˆè´¦å·ï¼‰ã€å¯†ç å³å®Œæˆå®‰è£…</p><h2 id="å¯-åœ-sentry" tabindex="-1"><a class="header-anchor" href="#å¯-åœ-sentry"><span>å¯/åœ sentry</span></a></h2><p>docker æœªå¯åŠ¨æ—¶åº”å½“å…ˆå¯åŠ¨ docker</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨ sentry æœåŠ¡</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/sentry
<span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœæ­¢ sentry æœåŠ¡</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/sentry
<span class="token function">docker</span> compose down
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é¦–æ¬¡è®¿é—®-sentry" tabindex="-1"><a class="header-anchor" href="#é¦–æ¬¡è®¿é—®-sentry"><span>é¦–æ¬¡è®¿é—® sentry</span></a></h2><p>æµè§ˆå™¨è®¿é—® <code>http://\${æœåŠ¡å™¨IP}:9000</code>ï¼Œè¾“å…¥å®‰è£…æ—¶åˆ›å»ºçš„è´¦å·å¯†ç è¿›è¡Œç™»å½•</p><p>ç™»é™†åå°†è·³è½¬åˆ°ä¸€ä¸ªåˆå§‹é…ç½®é¡µé¢ï¼Œå¯ä»¥ä¸åšä»»ä½•é…ç½®æ”¹åŠ¨ï¼Œç›´æ¥ç‚¹å‡»åº•éƒ¨ <code>continue</code> æŒ‰é’®ã€‚</p><p>ç‚¹å‡»å·¦ä¸Šè§’<code>Sentry</code>æ–‡å­—ï¼Œå†ç‚¹å‡»ä¸‹æ‹‰èœå•ä¸­çš„<code>User settings</code>ï¼š</p>`,14),O=n("li",null,[s("å°† "),n("code",null,"Language"),s("è®¾ç½®ä¸º"),n("code",null,"Simplified Chinese")],-1),V=n("code",null,"Timezone",-1),L=n("code",null,"Shanghai",-1),U={href:"https://github.com/getsentry/self-hosted/issues/2405",target:"_blank",rel:"noopener noreferrer"},$=n("li",null,"åˆ·æ–°æµè§ˆå™¨åç•Œé¢å°±å˜æˆäº†ä¸­æ–‡",-1),M=e('<p><img src="'+d+'" alt="è°ƒæ•´ç•Œé¢è¯­è¨€ä¸æ—¶åŒº"></p><h2 id="ä½¿ç”¨-sentry" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-sentry"><span>ä½¿ç”¨ sentry</span></a></h2><h3 id="_1-åœ¨-sentry-åˆ›å»ºé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_1-åœ¨-sentry-åˆ›å»ºé¡¹ç›®"><span>1. åœ¨ sentry åˆ›å»ºé¡¹ç›®</span></a></h3><p>ç‚¹å‡»å·¦ä¾§èœå•é¡¹<code>é¡¹ç›®</code>ï¼Œå†ç‚¹å‡»å³ä¸Šè§’<code>åˆ›å»ºé¡¹ç›®</code></p><p><img src="'+u+'" alt="åˆ›å»ºé¡¹ç›®"></p><p>å¹³å°é€‰æ‹©<code>VUE</code>ï¼Œåœ¨é¡µé¢åº•éƒ¨<code>é¡¹ç›®åç§°</code>å¤„å¡«å…¥é¡¹ç›®åç§°ï¼Œæœ€åç‚¹å‡»<code>åˆ›å»ºé¡¹ç›®</code></p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>é¡¹ç›®åç§°ä¾æ®è‡ªå·±çš„çœŸå®é¡¹ç›®éšæ„å¡«å†™ï¼Œè¿™é‡Œåªæ˜¯ä»¥<code>zhuandai_frontend</code>ä¸ºä¾‹</p></div><p><img src="'+k+'" alt="åˆ›å»ºé¡¹ç›®"></p><h3 id="_2-vue-å‰ç«¯é¡¹ç›®é›†æˆ-sentry-sdk" tabindex="-1"><a class="header-anchor" href="#_2-vue-å‰ç«¯é¡¹ç›®é›†æˆ-sentry-sdk"><span>2. Vue å‰ç«¯é¡¹ç›®é›†æˆ sentry SDK</span></a></h3>',9),Y={href:"https://docs.sentry.io/platforms/javascript/guides/vue/",target:"_blank",rel:"noopener noreferrer"},F=e(`<p>ä»¥ä¸‹ä¸ºç®€å•é›†æˆæ–¹å¼ï¼Œåç»­éœ€è¦æ·»åŠ  <code>version</code> ä»¥åŠ <code>environment</code></p><h4 id="_1-å®‰è£…-sdk" tabindex="-1"><a class="header-anchor" href="#_1-å®‰è£…-sdk"><span>1. å®‰è£… SDK</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> i @sentry/vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-è·å–-dsn-å®¢æˆ·ç«¯å¯†é’¥" tabindex="-1"><a class="header-anchor" href="#_2-è·å–-dsn-å®¢æˆ·ç«¯å¯†é’¥"><span>2. è·å– DSN å®¢æˆ·ç«¯å¯†é’¥</span></a></h4><p>DSN æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†æ˜æ–‡å¯†é’¥å’Œ sentry æœåŠ¡çš„ IPã€ç«¯å£å·ç­‰ä¿¡æ¯ã€‚åœ¨å‰ç«¯åˆå§‹åŒ– SDK æ—¶ä¼ å…¥ DSNï¼ŒSDK é€šè¿‡è§£æè¿™ä¸ª DSN å­—ç¬¦ä¸²è·å¾—ä¸ŠæŠ¥çš„æƒé™ä»¥åŠçŸ¥é“å‘å“ªé‡Œä¸ŠæŠ¥äº‹ä»¶ã€‚</p><p>ç‚¹å‡»å·¦ä¾§èœå•é¡¹<code>é¡¹ç›®</code>ï¼Œå†ç‚¹å‡»è¯¥é¡¹ç›®çš„é½¿è½®å›¾æ ‡</p><p><img src="`+v+'" alt="è·å– DSN"></p><p>ç‚¹å‡»å·¦ä¾§<code>å®¢æˆ·ç«¯å¯†é’¥ (DSN)</code>ï¼Œå†åŒå‡»å³ä¾§ <code>DSN</code> è¾“å…¥æ¡†å†…çš„æ–‡å­—è¿›è¡Œå…¨é€‰ï¼Œå…¨é€‰åè¿›è¡Œå¤åˆ¶</p><p><img src="'+m+`" alt="è·å– DSN"></p><h4 id="_3-å¼•å…¥-åˆå§‹åŒ–-sdk" tabindex="-1"><a class="header-anchor" href="#_3-å¼•å…¥-åˆå§‹åŒ–-sdk"><span>3. å¼•å…¥ &amp; åˆå§‹åŒ– SDK</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> init<span class="token punctuation">,</span> BrowserTracing<span class="token punctuation">,</span> vueRouterInstrumentation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setupSentry</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    <span class="token comment">// å¡«å…¥ DSN</span>
    <span class="token literal-property property">dsn</span><span class="token operator">:</span> <span class="token string">&quot;å¡«å…¥å¤åˆ¶çš„ DSN&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">integrations</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">BrowserTracing</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">routingInstrumentation</span><span class="token operator">:</span> <span class="token function">vueRouterInstrumentation</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token comment">/* App.vue */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token comment">/* { options } */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¿…é¡»å…ˆåˆå§‹åŒ– sentry å† mountï¼Œå¦åˆ™ mount æœŸé—´æŠ¥é”™äº† sentry æ•è·ä¸åˆ°ä¹Ÿå°±æ— æ³•ä¸ŠæŠ¥</span>
<span class="token function">setupSentry</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">æç¤º</p><p>SDK ä¸ä¼šåœ¨å¼€å‘æ¨¡å¼ä¸‹ä¸ŠæŠ¥å¼‚å¸¸ï¼Œæ„å»ºåæ‰èƒ½çœ‹åˆ°ä¸ŠæŠ¥çš„è¯·æ±‚</p></div><h3 id="_3-ä¸Šä¼ -sourcemap" tabindex="-1"><a class="header-anchor" href="#_3-ä¸Šä¼ -sourcemap"><span>3. ä¸Šä¼  sourcemap</span></a></h3><h4 id="_1-å®‰è£…ä¸Šä¼ æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-å®‰è£…ä¸Šä¼ æ’ä»¶"><span>1. å®‰è£…ä¸Šä¼ æ’ä»¶</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> i @sentry/vite-plugin <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-è·å–-authtoken" tabindex="-1"><a class="header-anchor" href="#_2-è·å–-authtoken"><span>2. è·å– authToken</span></a></h4><p>ç‚¹å‡»å·¦ä¸Šè§’ï¼Œé€‰æ‹©<code>User auth tokens</code>ï¼Œå†ç‚¹å‡»<code>åˆ›å»ºæ–°çš„ä»¤ç‰Œ</code></p><p><img src="`+h+'" alt="è·å– authToken"></p><p>ä½œç”¨åŸŸä½¿ç”¨é»˜è®¤å³å¯ï¼Œæœ€åç‚¹å‡»<code>åˆ›å»ºä»¤ç‰Œ</code></p><p><img src="'+b+'" alt="è·å– authToken"></p><p>åŒå‡»å³ä¾§ <code>è®¤è¯ä»¤ç‰Œ</code> è¾“å…¥æ¡†å†…çš„æ–‡å­—è¿›è¡Œå…¨é€‰ï¼Œå…¨é€‰åè¿›è¡Œå¤åˆ¶</p><p><img src="'+_+`" alt="è·å– authToken"></p><h4 id="_3-å¼•å…¥-åˆå§‹åŒ–ä¸Šä¼ æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-å¼•å…¥-åˆå§‹åŒ–ä¸Šä¼ æ’ä»¶"><span>3. å¼•å…¥ &amp; åˆå§‹åŒ–ä¸Šä¼ æ’ä»¶</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sentryVitePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/vite-plugin&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// çœç•¥å…¶ä»–é…ç½®</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// sourcmap åº”å½“è®¾ç½®ä¸º true</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// çœç•¥å…¶ä»–æ’ä»¶</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token comment">// Put the Sentry vite plugin after all other plugins</span>
    <span class="token function">sentryVitePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">authToken</span><span class="token operator">:</span> <span class="token string">&quot;å¡«å…¥å¤åˆ¶çš„ authToken&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å¡«å…¥ç»„ç»‡ IDï¼Œé»˜è®¤éƒ½æ˜¯ sentry</span>
      <span class="token literal-property property">org</span><span class="token operator">:</span> <span class="token string">&quot;sentry&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// é¡¹ç›®åç§°</span>
      <span class="token literal-property property">project</span><span class="token operator">:</span> <span class="token string">&quot;å¡«å…¥é¡¹ç›®å&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// sentry æœåŠ¡çš„ IP + PORT</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">http://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>æœåŠ¡å™¨<span class="token constant">IP</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:9000</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token comment">// å…³é—­æ—¥å¿—æ˜¾ç¤ºï¼Œæƒ³çœ‹ä¸Šä¼ æ—¥å¿—å¯è®¾ç½®ä¸º false</span>
      <span class="token literal-property property">slient</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">sourcemaps</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸Šä¼ å®Œæˆååˆ é™¤ sourcemap æ–‡ä»¶</span>
        <span class="token comment">// é˜²æ­¢æ„å¤–å°† sourcemap æ–‡ä»¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå¯¼è‡´æºç æ³„éœ²</span>
        <span class="token literal-property property">filesToDeleteAfterUpload</span><span class="token operator">:</span> <span class="token string">&quot;**/*.js.map&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„å»ºæˆåŠŸåã€å®Œæˆå‰ä¼šè‡ªåŠ¨ä¸Šä¼ </p><h2 id="é›†æˆ-release" tabindex="-1"><a class="header-anchor" href="#é›†æˆ-release"><span>é›†æˆ release</span></a></h2><p>ä¸ºäº†èƒ½è®©<code>sentry</code> æ­£ç¡®æ˜ å°„é”™è¯¯å‘ç”Ÿçš„æ–‡ä»¶ä¸è¡Œæ•°ï¼Œä¸ŠæŠ¥æ—¶çš„ <code>release</code> å’Œä¸Šä¼  <code>sourcemap</code> æ—¶çš„ <code>release</code> åº”å½“ä¿æŒç›¸åŒ</p><p>å½“æ²¡æœ‰æ‰‹åŠ¨è®¾ç½® <code>release</code> æ—¶ï¼Œsentry ä¼šè‡ªå·±ç”Ÿæˆ <code>release</code>ï¼Œå› æ­¤åœ¨ <code>init</code> æ—¶å’Œä¸Šä¼ æ—¶è¦ä¹ˆéƒ½è®¾ç½®å¹¶ä¸”è®¾ç½®æˆç›¸åŒçš„ï¼Œè¦ä¹ˆå°±éƒ½ä¸è¦è®¾ç½®</p><p>é›†æˆ <code>release</code> éœ€è¦é…ç½®ä¸¤ä¸ªåœ°æ–¹ï¼š <code>sentryVitePlugin</code> å’Œ <code>Sentry.init</code></p>`,29),z=n("code",null,"__RELEASE_4_SENTRY__",-1),H=e(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx cross-env <span class="token assign-left variable">__RELEASE_4_SENTRY__</span><span class="token operator">=</span><span class="token variable">\${releaseNo}</span> <span class="token assign-left variable">__IS_CREATE_SOURCE_MAP__</span><span class="token operator">=</span><span class="token number">1</span> vite build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-é…ç½®-sentryviteplugin" tabindex="-1"><a class="header-anchor" href="#_1-é…ç½®-sentryviteplugin"><span>1. é…ç½® <code>sentryVitePlugin</code></span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sentryVitePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/vite-plugin&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// è¯»å–ç¯å¢ƒå˜é‡</span>
<span class="token keyword">const</span> <span class="token constant">RELEASE_NAME</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>__RELEASE_4_SENTRY__
<span class="token keyword">const</span> <span class="token constant">IS_IS_CREATE_SOURCE_MAP</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>__CREATE_SOURCE_MAP__

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// çœç•¥å…¶ä»–é…ç½®</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token constant">IS_CREATE_SOURCE_MAP</span><span class="token punctuation">,</span>
  <span class="token comment">// å®šä¹‰ release ç‰ˆæœ¬å·å…¨å±€å¸¸é‡ï¼Œåº”ç”¨ä»£ç ä¸­ Sentry.init() æ—¶ä½¿ç”¨</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">__RELEASE_4_SENTRY__</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token constant">RELEASE_NAME</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// çœç•¥å…¶ä»–æ’ä»¶</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token function">sentryVitePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// æ–°å¢ release é…ç½®é¡¹</span>
      <span class="token literal-property property">release</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// vite æ’ä»¶å†…çš„ release.name è¦ä¸ Sentry.init æ—¶çš„ release ä¿æŒç›¸åŒ</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token constant">RELEASE_NAME</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// å¯ä»¥é…ç½®ä¹Ÿå¯ä»¥ä¸é…ç½®ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯ä¸ç”Ÿæˆ sourcemap å°±ä¸ç”¨ä¸Šä¼ </span>
      <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token constant">IS_CREATE_SOURCE_MAP</span>
      <span class="token comment">// ä»¥ä¸‹é…ç½®ä¸é›†æˆ release æ— å…³æ— éœ€æ”¹åŠ¨</span>
      <span class="token literal-property property">authToken</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">org</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">project</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-é…ç½®-sentry-init" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®-sentry-init"><span>2. é…ç½® <code>Sentry.init</code></span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> init<span class="token punctuation">,</span> BrowserTracing <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setupSentry</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// åœ¨ vite.config.js çš„ define ä¸­è®¾ç½®çš„è¯¥å…¨å±€å¸¸é‡</span>
    <span class="token literal-property property">release</span><span class="token operator">:</span> __RELEASE_4_SENTRY__<span class="token punctuation">,</span>
    app<span class="token punctuation">,</span>
    <span class="token literal-property property">dsn</span><span class="token operator">:</span> <span class="token string">&quot;å¡«å…¥ DSN&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">integrations</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">BrowserTracing</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">routingInstrumentation</span><span class="token operator">:</span> <span class="token function">vueRouterInstrumentation</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#_3-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ"><span>3. æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ</span></a></h3><p>æŸæ¬¡æ„å»ºæŒ‡å®šç‰ˆæœ¬å·ä¸º<code>11</code>ã€ç”Ÿæˆ <code>sourcemap</code>ï¼Œä½¿ç”¨æ„å»ºå‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx cross-env <span class="token assign-left variable">__RELEASE_4_SENTRY__</span><span class="token operator">=</span><span class="token number">11</span> <span class="token assign-left variable">__IS_CREATE_SOURCE_MAP__</span><span class="token operator">=</span><span class="token number">1</span> vite build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹é”™è¯¯è¯¦æƒ…ã€æŠ¥é”™æ–‡ä»¶åŠè¡Œæ•°ï¼š</p><p><img src="`+y+'" alt="æŸ¥çœ‹é”™è¯¯è¯¦æƒ…ã€æŠ¥é”™æ–‡ä»¶åŠè¡Œæ•°"></p><p>æŸ¥çœ‹ <code>sourcemap</code> åŠå¯¹åº”çš„ç‰ˆæœ¬å·ï¼š</p><p><img src="'+g+`" alt="æŸ¥çœ‹é”™è¯¯è¯¦æƒ…ã€æŠ¥é”™æ–‡ä»¶åŠè¡Œæ•°"></p><h2 id="é›†æˆ-environment" tabindex="-1"><a class="header-anchor" href="#é›†æˆ-environment"><span>é›†æˆ environment</span></a></h2><p>ç¯å¢ƒä¸€èˆ¬åˆ†ä¸ºï¼šç”Ÿäº§ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€å¼€å‘ç¯å¢ƒï¼Œé€šå¸¸æ¥è¯´å¼€å‘ç¯å¢ƒå®Œå…¨æ²¡æœ‰ä¸ŠæŠ¥çš„å¿…è¦ã€‚</p><p>é›†æˆ <code>environment</code> åªéœ€è¦é…ç½® <code>Sentry.init</code> å³å¯ï¼Œä¸éœ€è¦é…ç½® <code>sentryVitePlugin</code></p><p><code>environment</code> çš„å€¼ä½¿ç”¨ <code>import.meta.env.MODE</code> å³å¯ï¼š</p><ol><li><p><code>vite build</code> æ—¶ <code>import.meta.env.MODE</code> çš„å€¼æ˜¯ <code>&quot;production&quot;</code></p></li><li><p><code>vite build --mode \${MODE}</code> æ—¶ <code>import.meta.env.MODE</code> çš„å€¼æ˜¯ <code>\${MODE}</code></p></li><li><p><code>environment</code> å€¼å¯ä»¥å®Œå…¨è‡ªå®šä¹‰ï¼Œä¸æ˜¯å¿…é¡»ä¸º <code>&quot;production&quot;</code></p></li></ol><h3 id="_1-é…ç½®-sentry-init" tabindex="-1"><a class="header-anchor" href="#_1-é…ç½®-sentry-init"><span>1. é…ç½® <code>Sentry.init</code></span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> init<span class="token punctuation">,</span> BrowserTracing <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setupSentry</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½® \`environment\`</span>
    <span class="token literal-property property">environment</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MODE</span><span class="token punctuation">,</span>
    app<span class="token punctuation">,</span>
    <span class="token literal-property property">dsn</span><span class="token operator">:</span> <span class="token string">&quot;å¡«å…¥ DSN&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">integrations</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">BrowserTracing</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">routingInstrumentation</span><span class="token operator">:</span> <span class="token function">vueRouterInstrumentation</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ„å»ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>vite build
<span class="token comment"># OR</span>
vite build <span class="token parameter variable">--mode</span> staging
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#_2-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ"><span>2. æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ</span></a></h3><p>æœç´¢æ¡ä»¶å¤„ç‚¹å‡» <code>All Envs</code>ï¼Œä¸‹æ‹‰ä¸­å¯æ ¹æ®ç¯å¢ƒå˜é‡ç­›é€‰</p><p><img src="`+f+`" alt="æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ"></p><h2 id="ä¸ŠæŠ¥æ—¶æºå¸¦ç”¨æˆ·ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#ä¸ŠæŠ¥æ—¶æºå¸¦ç”¨æˆ·ä¿¡æ¯"><span>ä¸ŠæŠ¥æ—¶æºå¸¦ç”¨æˆ·ä¿¡æ¯</span></a></h2><p>åœ¨ <code>init</code> æ—¶è®¾ç½® <code>beforeSend</code></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> init <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useUserStore <span class="token keyword">from</span> <span class="token string">&quot;@/store/user&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> userStore <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// çœç•¥å…¶ä»–é…ç½®â€¦â€¦</span>
  <span class="token comment">// åœ¨ beforeSend å†…è®¾ç½® event.user.*</span>
  <span class="token function">beforeSend</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    userStore <span class="token operator">=</span> userStore <span class="token operator">||</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>userStore<span class="token operator">?.</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span>user <span class="token operator">=</span> event<span class="token punctuation">.</span>user <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      event<span class="token punctuation">.</span>user<span class="token punctuation">.</span>id <span class="token operator">=</span> userStore<span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
      event<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username <span class="token operator">=</span> userStore<span class="token punctuation">.</span>user<span class="token punctuation">.</span>nickname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> event<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="zdb-ä½¿ç”¨ä¸­çš„å®¢åˆ¶åŒ–" tabindex="-1"><a class="header-anchor" href="#zdb-ä½¿ç”¨ä¸­çš„å®¢åˆ¶åŒ–"><span>ZDB ä½¿ç”¨ä¸­çš„å®¢åˆ¶åŒ–</span></a></h2><h3 id="_1-å…¬ç½‘è½¬å‘ä¸ŠæŠ¥è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#_1-å…¬ç½‘è½¬å‘ä¸ŠæŠ¥è¯·æ±‚"><span>1. å…¬ç½‘è½¬å‘ä¸ŠæŠ¥è¯·æ±‚</span></a></h3><p>ç›®çš„æ˜¯è®©ä¸ŠæŠ¥å¼‚å¸¸çš„è¯·æ±‚èµ°æµ‹è¯•æœåŠ¡å™¨è€Œä¸æ˜¯ç”Ÿäº§æœåŠ¡å™¨ï¼ŒèŠ‚çœæœåŠ¡å™¨èµ„æº</p><p>è¦è¾¾æˆçš„æ•ˆæœï¼š</p><p><img src="`+E+'" alt="ZDB æœåŠ¡å™¨"></p><p>å¦‚ä¸Šå›¾ï¼ŒZDB çš„<code>sentry</code>éƒ¨ç½²åœ¨ä¸€ä¸ªå†…ç½‘æœåŠ¡å™¨ä¸Šï¼Œåªèƒ½é€šè¿‡å†…éƒ¨ç½‘ç»œè®¿é—® <code>sentry</code> æœåŠ¡å™¨ï¼Œå¤–éƒ¨äº’è”ç½‘æ— æ³•ç›´æ¥è®¿é—® sentry æœåŠ¡å™¨å¹¶å‘é€ä¸ŠæŠ¥è¯·æ±‚ã€‚ å› æ­¤ç”Ÿäº§ç¯å¢ƒä¸ŠæŠ¥å¼‚å¸¸çš„è¯·æ±‚å…ˆåˆ°è¾¾<code>æµ‹è¯•æœåŠ¡å™¨</code>ä¸Šï¼Œç”±<code>æµ‹è¯•æœåŠ¡å™¨</code>ä¸Šçš„<code>nginx</code>èµ°å†…ç½‘è½¬å‘ä»£ç†åˆ°<code>sentry</code>æœåŠ¡å™¨ä¸Šã€‚</p><h4 id="_1-ä¿®æ”¹-dsn" tabindex="-1"><a class="header-anchor" href="#_1-ä¿®æ”¹-dsn"><span>1. ä¿®æ”¹ DSN</span></a></h4><p>sentry æä¾›çš„ DSN é€šå¸¸ä¸ºä»¥ä¸‹æ ¼å¼ï¼š</p><p><code>https://${HASH}@${SENTRY_SERVER_IP}:${SENTRY_SERVER_PORT}/${PROJECT_ID}</code></p><p>sentry å‰ç«¯ sdk ä¾æ® DSN å‘ <code>https://${SENTRY_SERVER_IP}:${SENTRY_SERVER_PORT}</code> å‘é€è¯·æ±‚ï¼Œå°† DSN ä¸­çš„ <code>SENTRY_SERVER_IP</code> å’Œ <code>SENTRY_SERVER_PORT</code> æ”¹ä¸ºå…¬ç½‘çš„ IP(åŸŸå) å’Œç«¯å£å·ï¼Œå†ç”±å…¬ç½‘çš„ IP èƒŒåçš„è¿™å°æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘åˆ° sentry æœåŠ¡å™¨å³å¯</p><p>æ¯”å¦‚è¦è®©<code>sentry</code>çš„è¯·æ±‚éƒ½è½¬å‘åˆ° sentry æœåŠ¡å™¨ï¼ŒDSN åº”å½“æ”¹æˆï¼š<code>https://${HASH}@${PUBLIC_IP}\\:${PUBLIC_PORT}/sentry/${PROJECT_ID}</code>ï¼Œå³ï¼š</p><ul><li>SENTRY_SERVER_IP æ¢æˆå…¬ç½‘åŸŸå</li><li>SENTRY_SERVER_PORT æ¢æˆå…¬ç½‘ç«¯å£å·</li><li>ç«¯å£å·åå¢åŠ ç”¨äºè½¬å‘çš„å‰ç¼€</li></ul><p>æ­¤æ—¶ sentry å‰ç«¯ sdk ä¾æ® DSN å‘ <code>https://${PUBLIC_HOST}:${PUBLIC_PORT}/sentry</code> å‘é€è¯·æ±‚</p><h4 id="_2-ä¿®æ”¹å…¬ç½‘çš„-ip-æœåŠ¡å™¨çš„-nginx-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-ä¿®æ”¹å…¬ç½‘çš„-ip-æœåŠ¡å™¨çš„-nginx-é…ç½®"><span>2. ä¿®æ”¹å…¬ç½‘çš„ IP æœåŠ¡å™¨çš„ nginx é…ç½®</span></a></h4><div class="language-nginx.conf line-numbers-mode" data-ext="nginx.conf" data-title="nginx.conf"><pre class="language-nginx.conf"><code># å°† /sentry å¼€å¤´çš„è¯·æ±‚è½¬å‘åˆ°çœŸå® sentry æœåŠ¡ä¸Š\nlocation /sentry {\n    http://${SENTRY_SERVER_IP}:9000/;\n}\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-å…¶ä»–å¯ç”¨æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_3-å…¶ä»–å¯ç”¨æ–¹æ¡ˆ"><span>3. å…¶ä»–å¯ç”¨æ–¹æ¡ˆ</span></a></h4><p>å³ï¼šä¿®æ”¹ <code>æ ¹ URL</code>ï¼ˆRoot Urlï¼‰ã€‚ä¿®æ”¹äº†ä¹‹å sentry æœ¬èº«çš„æœåŠ¡ä¹Ÿå‡ºç°äº†ä¸€äº›é—®é¢˜æ‰€ä»¥æ”¾å¼ƒäº†è¿™ä¸ªæ–¹æ¡ˆï¼Œæ”¹ä¸ºä¿®æ”¹ DSN</p><h3 id="_2-è§£å†³é’‰é’‰ç§»åŠ¨ç«¯-h5-å¾®åº”ç”¨å†…æ— æ³•ä¸ŠæŠ¥å¼‚å¸¸çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-è§£å†³é’‰é’‰ç§»åŠ¨ç«¯-h5-å¾®åº”ç”¨å†…æ— æ³•ä¸ŠæŠ¥å¼‚å¸¸çš„é—®é¢˜"><span>2. è§£å†³é’‰é’‰ç§»åŠ¨ç«¯ H5 å¾®åº”ç”¨å†…æ— æ³•ä¸ŠæŠ¥å¼‚å¸¸çš„é—®é¢˜</span></a></h3><p>åœ¨å¤šæ¬¡æäº¤äº†å·¥å•ä¸æŠ€æœ¯æ”¯æŒã€å¼€å‘äººå‘˜äº‰æ‰§ã€è®¨è®ºåï¼Œç»ˆäºæ‰¾åˆ°äº†é—®é¢˜çš„åŸå› ã€‚æœŸé—´é’‰é’‰çš„å¼€å‘äººå‘˜æ˜çŸ¥é“è‡ªå·±ä»£ç æœ‰é—®é¢˜å´éè¦æ€ªæˆ‘ä»¬çš„æœåŠ¡å™¨æœ‰é—®é¢˜ï¼Œéƒ½ä¸è‚¯åŠ¨æ‰‹æµ‹è¯•ä¸€ä¸‹ã€‚ğŸ˜’</p><p>é—®é¢˜åŸå› ï¼š</p><ol><li><p>é’‰é’‰ç§»åŠ¨ç«¯ <code>webview</code> å­˜åœ¨é—®é¢˜ï¼Œä½¿ç”¨ <code>fetch</code> å‘é€è¯·æ±‚é’‰é’‰ä¼šå°† <code>body</code> ç½®ä¸ºç©ºï¼Œå¯¼è‡´æœåŠ¡å™¨è¿”å› <code>400</code></p></li><li><p><code>sentry</code> ä¸ŠæŠ¥é»˜è®¤ä½¿ç”¨ <code>fetch</code>ï¼Œå› æ­¤æ— æ³•ä¸ŠæŠ¥</p></li></ol><p>è§£å†³æ–¹æ³•ï¼š</p><p>ä½¿ç”¨ <code>xhr</code> ä¸ŠæŠ¥è€Œä¸ä½¿ç”¨ <code>fetch</code></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> init <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/vue&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> makeXHRTransport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@sentry/browser&quot;</span><span class="token punctuation">;</span>\n\n<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token comment">// çœç•¥å…¶ä»–é…ç½®â€¦â€¦</span>\n  <span class="token literal-property property">transport</span><span class="token operator">:</span> makeXHRTransport<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',51);function K(Z,J){const t=o("ExternalLinkIcon"),p=o("RouteLink");return l(),r("div",null,[x,R,w,n("p",null,[n("a",T,[s("å®˜æ–¹è‡ªæ‰˜ç®¡ç§æœæ­å»ºæ•™ç¨‹"),a(t)])]),j,n("p",null,[n("a",D,[s("Docker å®˜æ–¹æ•™ç¨‹"),a(t)])]),q,n("p",null,[n("a",N,[s("æ‰€æœ‰çš„ release ç‰ˆæœ¬ä¸‹è½½åœ°å€"),a(t)])]),n("p",null,[s("ZDB ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ "),n("a",P,[s("self-hosted-23.8.0"),a(t)])]),A,n("ol",null,[I,n("li",null,[n("p",null,[a(p,{to:"/jenkins/#%E6%8F%90%E5%8D%87%E9%95%9C%E5%83%8F%E6%8B%89%E5%8F%96%E9%80%9F%E5%BA%A6%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"},{default:c(()=>[s("æå‡é•œåƒæ‹‰å–é€Ÿåº¦")]),_:1})])]),C]),B,n("ul",null,[O,n("li",null,[s("å°† "),V,s("è®¾ç½®ä¸º"),L,s("ï¼ˆ"),n("a",U,[s("ä¿®å¤æ— æ³•æ›´æ”¹æ—¶åŒºçš„é—®é¢˜"),a(t)]),s(" ï¼‰")]),$]),M,n("p",null,[n("a",Y,[s("å®˜æ–¹é›†æˆæ•™ç¨‹"),a(t)])]),F,n("p",null,[s("å‡è®¾ç‰ˆæœ¬å·æ˜¯é€šè¿‡"),a(p,{to:"/vite-vue/#%E6%B3%A8%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"},{default:c(()=>[s("å‘½ä»¤è¡Œæ³¨å…¥çš„ç¯å¢ƒå˜é‡")]),_:1}),s("ï¼Œå‡è®¾æ³¨å…¥çš„ç‰ˆæœ¬å·ç¯å¢ƒå˜é‡åæ˜¯ "),z,s("ï¼š")]),H])}const Q=i(S,[["render",K],["__file","index.html.vue"]]),X=JSON.parse('{"path":"/sentry/","title":"Sentry ç›‘æ§å¹³å°","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"ä¸‹è½½ & å®‰è£…","slug":"ä¸‹è½½-å®‰è£…","link":"#ä¸‹è½½-å®‰è£…","children":[{"level":3,"title":"1. å‡†å¤‡æœåŠ¡å™¨","slug":"_1-å‡†å¤‡æœåŠ¡å™¨","link":"#_1-å‡†å¤‡æœåŠ¡å™¨","children":[]},{"level":3,"title":"2. å®‰è£… docker å’Œ docker-compose","slug":"_2-å®‰è£…-docker-å’Œ-docker-compose","link":"#_2-å®‰è£…-docker-å’Œ-docker-compose","children":[]},{"level":3,"title":"3. ä¸‹è½½ sentry","slug":"_3-ä¸‹è½½-sentry","link":"#_3-ä¸‹è½½-sentry","children":[]},{"level":3,"title":"4. å®‰è£… sentry","slug":"_4-å®‰è£…-sentry","link":"#_4-å®‰è£…-sentry","children":[]},{"level":3,"title":"5. åˆ›å»ºé¦–ä¸ªè´¦å·","slug":"_5-åˆ›å»ºé¦–ä¸ªè´¦å·","link":"#_5-åˆ›å»ºé¦–ä¸ªè´¦å·","children":[]}]},{"level":2,"title":"å¯/åœ sentry","slug":"å¯-åœ-sentry","link":"#å¯-åœ-sentry","children":[]},{"level":2,"title":"é¦–æ¬¡è®¿é—® sentry","slug":"é¦–æ¬¡è®¿é—®-sentry","link":"#é¦–æ¬¡è®¿é—®-sentry","children":[]},{"level":2,"title":"ä½¿ç”¨ sentry","slug":"ä½¿ç”¨-sentry","link":"#ä½¿ç”¨-sentry","children":[{"level":3,"title":"1. åœ¨ sentry åˆ›å»ºé¡¹ç›®","slug":"_1-åœ¨-sentry-åˆ›å»ºé¡¹ç›®","link":"#_1-åœ¨-sentry-åˆ›å»ºé¡¹ç›®","children":[]},{"level":3,"title":"2. Vue å‰ç«¯é¡¹ç›®é›†æˆ sentry SDK","slug":"_2-vue-å‰ç«¯é¡¹ç›®é›†æˆ-sentry-sdk","link":"#_2-vue-å‰ç«¯é¡¹ç›®é›†æˆ-sentry-sdk","children":[]},{"level":3,"title":"3. ä¸Šä¼  sourcemap","slug":"_3-ä¸Šä¼ -sourcemap","link":"#_3-ä¸Šä¼ -sourcemap","children":[]}]},{"level":2,"title":"é›†æˆ release","slug":"é›†æˆ-release","link":"#é›†æˆ-release","children":[{"level":3,"title":"1. é…ç½® sentryVitePlugin","slug":"_1-é…ç½®-sentryviteplugin","link":"#_1-é…ç½®-sentryviteplugin","children":[]},{"level":3,"title":"2. é…ç½® Sentry.init","slug":"_2-é…ç½®-sentry-init","link":"#_2-é…ç½®-sentry-init","children":[]},{"level":3,"title":"3. æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ","slug":"_3-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ","link":"#_3-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ","children":[]}]},{"level":2,"title":"é›†æˆ environment","slug":"é›†æˆ-environment","link":"#é›†æˆ-environment","children":[{"level":3,"title":"1. é…ç½® Sentry.init","slug":"_1-é…ç½®-sentry-init","link":"#_1-é…ç½®-sentry-init","children":[]},{"level":3,"title":"2. æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ","slug":"_2-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ","link":"#_2-æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ","children":[]}]},{"level":2,"title":"ä¸ŠæŠ¥æ—¶æºå¸¦ç”¨æˆ·ä¿¡æ¯","slug":"ä¸ŠæŠ¥æ—¶æºå¸¦ç”¨æˆ·ä¿¡æ¯","link":"#ä¸ŠæŠ¥æ—¶æºå¸¦ç”¨æˆ·ä¿¡æ¯","children":[]},{"level":2,"title":"ZDB ä½¿ç”¨ä¸­çš„å®¢åˆ¶åŒ–","slug":"zdb-ä½¿ç”¨ä¸­çš„å®¢åˆ¶åŒ–","link":"#zdb-ä½¿ç”¨ä¸­çš„å®¢åˆ¶åŒ–","children":[{"level":3,"title":"1. å…¬ç½‘è½¬å‘ä¸ŠæŠ¥è¯·æ±‚","slug":"_1-å…¬ç½‘è½¬å‘ä¸ŠæŠ¥è¯·æ±‚","link":"#_1-å…¬ç½‘è½¬å‘ä¸ŠæŠ¥è¯·æ±‚","children":[]},{"level":3,"title":"2. è§£å†³é’‰é’‰ç§»åŠ¨ç«¯ H5 å¾®åº”ç”¨å†…æ— æ³•ä¸ŠæŠ¥å¼‚å¸¸çš„é—®é¢˜","slug":"_2-è§£å†³é’‰é’‰ç§»åŠ¨ç«¯-h5-å¾®åº”ç”¨å†…æ— æ³•ä¸ŠæŠ¥å¼‚å¸¸çš„é—®é¢˜","link":"#_2-è§£å†³é’‰é’‰ç§»åŠ¨ç«¯-h5-å¾®åº”ç”¨å†…æ— æ³•ä¸ŠæŠ¥å¼‚å¸¸çš„é—®é¢˜","children":[]}]}],"git":{"createdTime":1707466523000,"updatedTime":1707466523000,"contributors":[{"name":"é©¬æŒ¯è½©","email":"mzx23333@163.com","commits":1}]},"readingTime":{"minutes":8.63,"words":2588},"filePathRelative":"sentry/README.md","localizedDate":"2024å¹´2æœˆ9æ—¥"}');export{Q as comp,X as data};
